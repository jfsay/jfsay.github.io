---
title: "PHP实现首页文章的截取输出（摘要）的方法"
date: 2010-06-12
categories: 
  - "website"
tags: 
  - "php"
---

一般在首页或者在评论处需要使用内容的截取输出，我在使用PHP的mb\_strimwidth()函数时，发现在截断文本的最后一个位置会发现截取半个字的现象，显示的是个小框框“口”。之后使用mb\_substr()函数就没有这个问题了。

在截断输出内容时，我们还应该搭配strip\_tags()函数来共同实现。strip\_tags()的作用是清除字符串内的html标签，放在这里就是清除输出的内容格式(包括清除图片)。既然目的是截取小段文字，自然也不需讲求格式。下面是strip\_tags()函数的完整形式：

```
string strip_tags ( string $str [, string $allowable_tags ] )
```

因此截取输出的方式是，先清除格式，然后再按需截断。如下所示：

```
<? mb_substr(strip_tags($rs->content), 0, 200, 'utf-8');?>
```

其中$rs->content为原始文本内容，从第0的位置开始，截取200个字符，采用utf-8字符编码。

通过清除格式函数和截取函数的搭配使用，就可以实现输出200个长度的无格式字了。当然你网页的编码如果是gb2312，记得要把utf-8修改为gb2312.
